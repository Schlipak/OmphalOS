!function(){"use strict";var t="undefined"==typeof window?global:window;if("function"!=typeof t.require){var e={},n={},i={},r={}.hasOwnProperty,s=function(t,e){var n=i[t]||i[t+"/index.js"];return n||t},o=/^\.\.?(\/|$)/,a=function(t,e){for(var n,i=[],r=(o.test(e)?t+"/"+e:e).split("/"),s=0,a=r.length;a>s;s++)n=r[s],".."===n?i.pop():"."!==n&&""!==n&&i.push(n);return i.join("/")},l=function(t){return t.split("/").slice(0,-1).join("/")},c=function(e){return function(n){var i=a(l(e),n);return t.require(i,e)}},u=function(t,e){var i={id:t,exports:{}};return n[t]=i,e(i.exports,c(t),i),i.exports},p=function(t,i){null==i&&(i="/");var o=s(t,i);if(r.call(n,o))return n[o].exports;if(r.call(e,o))return u(o,e[o]);var l=a(o,"./index");if(r.call(n,l))return n[l].exports;if(r.call(e,l))return u(l,e[l]);throw new Error('Cannot find module "'+t+'" from "'+i+'"')};p.alias=function(t,e){i[e]=t},p.register=p.define=function(t,n){if("object"==typeof t)for(var i in t)r.call(t,i)&&p.register(i,t[i]);else e[t]=n},p.list=function(){var t=[];for(var n in e)r.call(e,n)&&t.push(n);return t},p.brunch=!0,p._cache=n,t.require=p}}(),require.register("Kernel",function(t,e,n){var i,r,s,o,a;r=e("src/Exceptions/KernelPanic"),o=e("src/HTMLUtils/NodeTester"),s=e("src/IO/KeyboardListener"),a=e("src/IO/TTYManager"),n.exports=i=function(){function t(t){if(null==t)throw new r(this,"Could not acquire display, aborting");return this.displaySurface=t,this.createTTYs(),this}return t.className="Kernel",t.version="0.1",t.displaySurface=null,t.keyboardListener=null,t.TTYManager=null,t.prototype.createTTYs=function(){return this.TTYManager=new a(this,this.displaySurface,7)},t.prototype.getTTY=function(t){return this.TTYManager.getTTY(t)},t.prototype.hideTTYs=function(){return this.TTYManager.hideTTYs()},t.prototype.showTTY=function(t){return this.TTYManager.showTTY(t)},t.prototype.clearTTY=function(t){return this.TTYManager.clearTTY(t)},t.prototype.emitException=function(t,e){var n,i;if(null==e&&(e=!1),i=this.TTYManager.getTTY(1),null==i)throw new IOException("Could not acquire TTY");if(n=(new Date).toLocaleTimeString(),this.write(i,"["+n+"] %(F:yellow)Kernel exception%(F): "+t),e===!0)throw new Error(t)},t.prototype.emitMessage=function(t,e){var n,i;if(null==e&&(e=1),i=this.TTYManager.getTTY(e),null==i)throw new IOException("Could not acquire TTY");return n=(new Date).toLocaleTimeString(),this.write(i,"["+n+"] Message: "+t)},t.prototype.boot=function(){return this.write(this.getTTY(1),"Kernel version "+t.version),this.write(this.getTTY(1),"%(F:green)Welcome!%(F)"),this.write(this.getTTY(1),"Starting keyboard listener..."),this.keyboardListener=new s(this),this.keyboardListener.registerTTYCombos(),this.write(this.getTTY(1),"Loading single-user configuration...")},t.prototype.write=function(t,e){return null==t?(this.emitException("Could not find write target"),!1):o.isDOM(t)?(e=e.replace(/%\(([FB]){1}\:([\w\d]+)*\)/g,'<span class="$1 $2" data-color="$2">'),e=e.replace(/%\([FB]{1}\)/g,"</span>"),t.insertAdjacentHTML("beforeend","<span>"+e+"</span>"),!0):!1},t}()}),require.register("OS",function(t,e,n){var i,r,s,o;i=e("Kernel"),o=e("src/Xjs/XTechne"),s=e("src/Exceptions/OSException"),n.exports=r=function(){function t(t){return this.isInFrame()?this.displayFrameError():(this.kernel=new i(t),this)}return t.className="OmphalOS",t.version="0.1",t.versionName="Artemis",t.kernel=null,t.displayManager=null,t.prototype.boot=function(){if(null==this.kernel)throw new s("Could not start kernel. This is bad.");if(this.kernel.showTTY(1),this.kernel.write(this.kernel.getTTY(1),t.className+" version "+t.version+' "'+t.versionName+'"'),this.kernel.boot(),this.kernel.write(this.kernel.getTTY(1),"Starting "+o.className+" on TTY7..."),this.displayManager=new o(this.kernel,this.kernel.getTTY(7)),null==this.displayManager)throw new s(this,"Could not connect to "+o.className);return this.displayManager.init()},t.prototype.isInFrame=function(){var t,e;try{return window.self!==window.top}catch(e){return t=e,!0}},t.prototype.displayFrameError=function(){throw new s("Cannot run an instance of "+t.className+" in an iFrame")},t}()}),require.register("src/Apps/Apollo/Apollo",function(t,e,n){var i,r,s,o=function(t,e){function n(){this.constructor=t}for(var i in e)a.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},a={}.hasOwnProperty;s=e("src/Xjs/XTechneWindow"),r=e("src/Nomos/Nomos"),n.exports=i=function(t){function e(t){e.__super__.constructor.call(this,t,"Apollo",{size:{w:"900px",h:"600px"}}),this.initContent(),this.show()}return o(e,t),e.className="Apollo web browser",e.version="0.1",e.homeUrl="https://duckduckgo.com/",e.layout=null,e.logo=null,e.text=null,e.navBar=null,e.frame=null,e.prototype.initContent=function(){var t;return t=this,this.layout=r.createLayout({type:"flex",direction:"column"}),this.logo=r.createImage("usr/share/icons/apps/apollo.svg","200px","200px"),this.text=r.createText(e.className+" - v"+e.version,"18px"),null!=this.logo&&this.layout.appendChild(this.logo),null!=this.text&&this.layout.appendChild(this.text),this.window.appendChild(this.layout),this.initFrame()},e.prototype.initFrame=function(){var t;return t=this,this.frame=r.createIFrame(e.homeUrl),this.navBar=r.createTextInput(e.homeUrl,{border:"border-apollo"}),setTimeout(function(){return t.layout.classList.add("fadeOut"),setTimeout(function(){return t.window.removeChild(t.layout),t.layout=r.createLayout({type:"flex",direction:"column",alignment:"justify-start",padding:"padding-none",backgroundColor:"#373737"}),t.layout.classList.add("fadeIn"),t.window.appendChild(t.layout),t.layout.appendChild(t.navBar),t.layout.appendChild(t.frame),t.navBar.onkeyup=function(e){var n;return n=e.which||e.keyCode,13===n?t.navigate():void 0}},400)},1300)},e.prototype.navigate=function(t){var e,n;null==t&&(t=this.navBar.value),t.match(/^https?:\/\/.*$/)||(t="http://"+t);try{return this.frame.src=t}catch(n){return e=n,console.warn(e)}},e}(s)}),require.register("src/Apps/Hermes/Hermes",function(t,e,n){var i,r,s,o=function(t,e){function n(){this.constructor=t}for(var i in e)a.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},a={}.hasOwnProperty;s=e("src/Xjs/XTechneWindow"),r=e("src/Nomos/Nomos"),n.exports=i=function(t){function e(t){e.__super__.constructor.call(this,t,"Hermes",{size:{w:"500px",h:"400px"}}),this.initContent(),this.show()}return o(e,t),e.className="Hermes file explorer",e.layout=null,e.logo=null,e.text=null,e.prototype.initContent=function(){return this.layout=r.createLayout({type:"flex",direction:"column"}),this.logo=r.createImage("usr/share/icons/apps/hermes.svg","200px","200px"),this.text=r.createText(""+e.className,"18px"),null!=this.logo&&this.layout.appendChild(this.logo),null!=this.text&&this.layout.appendChild(this.text),this.window.appendChild(this.layout)},e}(s)}),require.register("src/Exceptions/GenericException",function(t,e,n){var i;n.exports=i=function(){function t(t,e){var n,i;if(null==t)throw new Error(e);i=t.getTTY(1),n=(new Date).toLocaleString(),t.write(i,"[ "+n+" ] Generic exception: "+e)}return t.className="GenericException",t}(),i.prototype=Object.create(Error.prototype),i.prototype.name="GenericException"}),require.register("src/Exceptions/IOException",function(t,e,n){var i;n.exports=i=function(){function t(t){var e;throw e=(new Date).toLocaleTimeString(),document.getElementsByTagName("body")[0].innerHTML="[ "+e+" ] IO exception: "+t,new Error(t)}return t.className="IOException",t}(),i.prototype=Object.create(Error.prototype),i.prototype.name="IOException"}),require.register("src/Exceptions/KernelException",function(t,e,n){var i,r,s=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;i=e("src/Exceptions/GenericException"),n.exports=r=function(t){function e(t,n){var i,r;e.__super__.constructor.call(this,n),r=t.getTTY(1),i=(new Date).toLocaleString(),t.write(r,"[ "+i+" ] Kernel exception: "+n)}return s(e,t),e.className="KernelException",e}(i),r.prototype=Object.create(Error.prototype),r.prototype.name="KernelException"}),require.register("src/Exceptions/KernelPanic",function(t,e,n){var i;n.exports=i=function(){function t(t,e){var n,i,r,s;if(null==t)throw new Error(e);if(null==t.TTYs||0===t.TTYs.length)throw new Error(e);for(s=t.TTYs[0],r=(new Date).toLocaleTimeString(),n=i=2;7>=i;n=++i)t.clearTTY(n);t.showTTY(1),t.write(s,"[ "+r+" ] %(F:red)Kernel panic%(F): "+e)}return t.className="KernelPanic",t}(),i.prototype=Object.create(Error.prototype),i.prototype.name="KernelPanic"}),require.register("src/Exceptions/OSException",function(t,e,n){var i;n.exports=i=function(){function t(t){var e;throw e=(new Date).toLocaleTimeString(),document.getElementsByTagName("body")[0].innerHTML="[ "+e+" ] System exception: "+t,new Error(t)}return t.className="OSException",t}(),i.prototype=Object.create(Error.prototype),i.prototype.name="OSException"}),require.register("src/Exceptions/XException",function(t,e,n){var i,r,s=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;i=e("src/Exceptions/GenericException"),n.exports=r=function(t){function e(t){var n;e.__super__.constructor.call(this,t),n=document.getElementsByTagName("body")[0],n.innerHTML=t}return s(e,t),e.className="XException",e}(i),r.prototype=Object.create(Error.prototype),r.prototype.name="XException"}),require.register("src/HTMLUtils/NodeTester",function(t,e,n){var i;n.exports=i=function(){function t(){}return t.className="NodeTester",t.isNode=function(t){return null==t?!1:typeof t==typeof{}?t instanceof Node:typeof t==typeof{}&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName},t.isDOM=function(t){return null==t?!1:HTMLElement===typeof{}?t instanceof HTMLElement:typeof t==typeof{}&&null!==t&&1===t.nodeType&&"string"==typeof t.nodeName},t}()}),require.register("src/IO/KeyboardListener",function(t,e,n){var i,r;i=e("src/Exceptions/IOException"),n.exports=r=function(){function t(e){if(null==e)throw new i("Somehow, could not acquire kernel. This is bad.");return this.kernel=e,null==window.keypress.Listener&&this.kernel.emitException("Cannot initialize keyboard listener",!0),this.listener=new window.keypress.Listener,this.kernel.write(this.kernel.getTTY(1),t.className+" version "+t.version),this}return t.className="KeyboardListener",t.version="0.1",t.kernel=null,t.listener=null,t.prototype.register=function(t,e,n,i){return null==t||null==e?(this.kernel.emitException("Cannot register new key listener: Invalid combo or callback"),!1):(null==n&&(n=!0),null==i&&(i=!0),this.listener.register_combo({keys:t,on_keydown:e,is_unordered:n,is_solitary:i}),!0)},t.prototype.unregister=function(t){return null==t?(this.kernel.emitException("Cannot unregister unknown key combo"),!1):(this.listener.unregister_combo(t),!0)},t.prototype.registerTTYCombos=function(){var t,e,n,r;if(null==this.kernel)throw new i("Somehow, could not acquire kernel. This is bad.");for(t=this.kernel,r=[],e=n=1;7>=n;e=++n)r.push(this.register("meta alt "+e,function(e){return t.showTTY(e.which-48)}));return r},t}()}),require.register("src/IO/TTYManager",function(t,e,n){var i,r,s;i=e("src/Exceptions/IOException"),r=e("src/HTMLUtils/NodeTester"),n.exports=s=function(){function t(t,e,n){var r,s,o,a;if(null==t)throw new i("Somehow, could not acquire kernel. This is bad.");if(this.kernel=t,null==e)throw new i("Could acquire display surface");for(this.displaySurface=e,this.TTYs=new Array,r=s=1,o=n;o>=1?o>=s:s>=o;r=o>=1?++s:--s)a=document.createElement("div"),a.classList.add("tty"),a.setAttribute("data-id",r),e.appendChild(a),this.TTYs.push(a),this.kernel.write(a,"[TTY"+r+"]")}return t.className="TTYManager",t.kernel=null,t.displaySurface=null,t.TTYs=null,t.activeTTY=1,t.prototype.getTTY=function(t){return null==t||1>t||t>7?void this.kernel.emitException("TTY"+t+" does not exist"):this.TTYs[t-1]},t.prototype.hideTTYs=function(){var t,e,n,i;for(n=this.TTYs,t=0,e=n.length;e>t;t++)i=n[t],i.classList.remove("active");return!0},t.prototype.showTTY=function(t){if(null==t)return this.kernel.emitException("Invalid TTY id"),!1;if("number"==typeof t){if(t===this.activeTTY)return!1;if(1>t||t>7)return this.kernel.emitException("TTY"+t+" does not exist"),!1;this.hideTTYs(),this.TTYs[t-1].classList.add("active"),this.activeTTY=t}else{if(!r.isDOM(t))return!1;this.hideTTYs(),t.classList.add("active"),this.activeTTY=t.getAttribute("data-id")}return!0},t.prototype.clearTTY=function(t){var e;for(e=this.getTTY(t);e.lastChild;)e.removeChild(e.lastChild);return!0},t}()}),require.register("src/JSUtils/AjaxHelper",function(t,e,n){var i;n.exports=i=function(){function t(){}return t.className="AjaxHelper",t.getJSON=function(t,e){var n;return null==t?(console.warn("no url"),null):null==e?(console.warn("no callback"),null):(t.match(/^.+(.json)$/)||(t+=".json"),n=new XMLHttpRequest,n.open("GET",t,!0),n.onload=function(){var t;return n.status>=200&&n.status<400?(t=JSON.parse(n.responseText),e(t)):console.warn("error getting data")},n.onerror=function(t){return warn(t)},n.send())},t}()}),require.register("src/JSUtils/Position",function(t,e,n){var i;n.exports=i=function(){function t(){}return t.className="Position",t.getPosition=function(t){var e,n,i,r;if(null==t)return null;for(e=0,i=0;t;)"BODY"===t.tagName?(n=t.scrollLeft||document.documentElement.scrollLeft,r=t.scrollTop||document.documentElement.scrollTop,e+=t.offsetLeft-n+t.clientLeft,i+=t.offsetTop-r+t.clientTop):(e+=t.offsetLeft-t.scrollLeft+t.clientLeft,i+=t.offsetTop-t.scrollTop+t.clientTop),t=t.offsetParent;return{x:e,y:i}},t}()}),require.register("src/Nomos/Nomos",function(t,e,n){var i;n.exports=i=function(){function t(){}return t.className="Nomos framework",t.createImage=function(t,e,n){var i;return null==t?null:(i=document.createElement("img"),i.classList.add("nomosImage"),i.src=t,null!=e&&(i.style.width=e),null!=n&&(i.style.height=n),i)},t.createText=function(t,e){var n;return null==t?null:(n=document.createElement("span"),n.classList.add("nomosTextNode"),n.innerHTML=t,null!=e&&(n.style.fontSize=e),n)},t.createLayout=function(t){var e;return null==t?null:null==t.type?null:(e=document.createElement("div"),e.classList.add("nomosLayout"),e.classList.add(t.type),null!=t.direction&&e.classList.add(t.direction),null!=t.alignment&&e.classList.add(t.alignment),null!=t.padding&&e.classList.add(t.padding),null!=t.backgroundColor&&(e.style.backgroundColor=t.backgroundColor),e)},t.createTextInput=function(t,e){var n;return n=document.createElement("input"),n.type="text",n.value=t,n.classList.add("nomosTextInput"),n.setAttribute("spellcheck",!1),null!=e&&null!=e.width&&n.classList.add(e.width),null!=e&&null!=e.border&&n.classList.add(e.border),n},t.createIFrame=function(t){var e;return null==t?null:(e=document.createElement("iframe"),e.classList.add("nomosIFrame"),e.src=t,e)},t}()}),require.register("src/Xjs/XTechne",function(t,e,n){var i,r,s,o,a;i=e("src/Exceptions/XException"),a=e("src/Xjs/XTechneStartup"),o=e("src/Xjs/XTechneLogin"),s=e("src/Xjs/XTechneDesktop"),n.exports=r=function(){function t(t,e){if(null==t)throw new i("Somehow, could not acquire kernel. This is bad.");if(null==e)throw new i("Could not acquire display surface. Aborting");this.kernelInstance=t,this.displaySurface=e}return t.className="XTechne display manager",t.kernelInstance=null,t.displaySurface=null,t.displayContainer=null,t.startupManager=null,t.loginManager=null,t.desktopManager=null,t.prototype.init=function(){return this.kernelInstance.showTTY(this.displaySurface),this.kernelInstance.write(this.displaySurface,"Loading display..."),this.displaySurface.classList.add("xinstance"),this.displayContainer=document.createElement("div"),this.displayContainer.classList.add("xtechneContainer"),Waves.init(),this.clearScreen(),this.displaySurface.appendChild(this.displayContainer),this.startupManager=new a(this,this.displayContainer)},t.prototype.startLogin=function(){return this.loginManager=new o(this,this.displayContainer)},t.prototype.startDesktop=function(){var t;return t=this,this.loginManager.removeEventListener("loginSuccess"),this.loginManager.removeEventListener("loginError"),setTimeout(function(){return t.clearSurface(t.loginManager.displaySurface),delete t.loginManager,t.loginManager=null,t.desktopManager=new s(t,t.displayContainer)},600)},t.prototype.clearSurface=function(t){if(null==t)return this.kernel.emitException("Could not find XTechne surface"),!1;for(;t.lastChild;)t.removeChild(t.lastChild)},t.prototype.clearScreen=function(){for(;this.displaySurface.lastChild;)this.displaySurface.removeChild(this.displaySurface.lastChild)},t}()}),require.register("src/Xjs/XTechneDesktop",function(t,e,n){var i,r,s,o,a;r=e("src/Exceptions/XException"),o=e("src/Xjs/XTechnePanel"),i=e("src/JSUtils/AjaxHelper"),a=e("src/Xjs/XTechneStackingManager"),n.exports=s=function(){function t(t,n){var i;if(null==t)throw new r("Could not acquire "+XTechne.className+" instance");if(null==n)throw new r("Could not acquire display surface");this.xtechne=t,this.displayContainer=n,this.displaySurface=document.createElement("div"),this.displaySurface.classList.add("xtechneDesktopContainer"),this.displaySurface.classList.add("hidden"),this.displayContainer.appendChild(this.displaySurface),i=e("OS"),this.initDesktop()}return t.className="XTechneDesktop",t.xtechne=null,t.displayContainer=null,t.displaySurface=null,t.stackManager=null,t.panels=null,t.prototype.initDesktop=function(){var t;return t=this,this.stackManager=new a,i.getJSON("etc/xtechne/desktoprc",function(e){var n,i,r,s,a;for(window.xDesktop=t,t.panels=new Array,a=e.panels,n=0,i=a.length;i>n;n++)r=a[n],s=new o(t,t.displaySurface,r),s.initContent(r.contents),t.panels.push(s);return null!=e.theme&&null!=e.theme.backgroundImage&&(t.displaySurface.style.backgroundImage="url('"+e.theme.backgroundImage+"')"),t.displaySurface.classList.remove("hidden")})},t}()}),require.register("src/Xjs/XTechneLogin",function(t,e,n){var i,r,s;r=e("src/Exceptions/XException"),i=e("src/JSUtils/AjaxHelper"),n.exports=s=function(){function t(e,n){var i;if(null==e)throw new r("Could not acquire "+XTechne.className+" instance");if(null==n)throw new r("Could not acquire display surface");this.xtechne=e,this.displaySurface=n,EventDispatcher.prototype.apply(t.prototype),i=this,this.addEventListener("loginSuccess",function(t){return e.startDesktop()}),this.addEventListener("loginError",function(t){return i.displayError(t)}),this.createPanel(),Waves.attach(this.submitButton,["waves-button","waves-float","waves-light"])}var e;return t.className="XTechne login manager",t.xtechne=null,t.displaySurface=null,t.panel=null,t.box=null,t.loginForm=null,t.usernameInput=null,t.passwordInput=null,t.submitButton=null,e=!1,t.prototype.createPanel=function(){var t,e;return this.panel=document.createElement("div"),this.panel.classList.add("xtechneLoginContainer"),this.displaySurface.appendChild(this.panel),this.box=document.createElement("div"),this.box.classList.add("xtechneLoginBox"),this.panel.appendChild(this.box),e='<form action="" id="loginFormContainer"> <label for="userInputBox" class="noselect"> Username <input type="text" name="username" id="userInputBox" autocomplete="off" autofocus> </label> <label for="passwordInputBox" class="noselect"> Password <input type="password" name="password" id="passwordInputBox" autocomplete="off"> </label> <button type="submit" name="loginButton" id="loginButton" class="material button blue">Login</button> </form>',this.box.insertAdjacentHTML("beforeend",e),this.loginForm=document.getElementById("loginFormContainer"),this.usernameInput=document.getElementById("userInputBox"),this.passwordInput=document.getElementById("passwordInputBox"),this.submitButton=document.getElementById("loginButton"),t=this,this.loginForm.onsubmit=function(e){return e.preventDefault(),t.login()}},t.prototype.__get_user_hash__=function(t,e){return null==t?!1:null==e?!1:i.getJSON("etc/passwd",e)},t.prototype.displayError=function(t){var e;return console.warn(t.message),this.submitButton.disabled=!0,this.submitButton.classList.add("error"),e=this,setTimeout(function(){return e.submitButton.disabled=!1,e.submitButton.classList.remove("error")},1200)},t.prototype.login=function(){var t,n,i;return e===!0?!1:(i=this.usernameInput.value.toLowerCase(),this.usernameInput.value=i,n=String(CryptoJS.SHA3(this.passwordInput.value)),t=this,i.length>0&&t.passwordInput.value.length>0?this.__get_user_hash__(i,function(r){var s,o,a,l;for(a=null,s=0,o=r.length;o>s;s++)l=r[s],l.user===i&&(a=l.hash);return null==a||a!==n?(t.dispatchEvent({type:"loginError",message:"Bad credentials for user "+i}),!1):(e=!0,t.submitButton.disabled=!0,t.dispatchEvent({type:"loginSuccess",message:"User "+i+" logged in successfully"}),t.panel.classList.add("dismissing"),!0)}):this.dispatchEvent({type:"loginError",message:"Username or password missing"}),!1)},t}()}),require.register("src/Xjs/XTechnePanel",function(t,e,n){var i,r,s,o;i=e("src/Exceptions/XException"),o=e("src/Xjs/XTechneWindow"),s=e("src/Xjs/XTechnePanelItem"),n.exports=r=function(){function t(t,e,n){if(null==t)throw new i("Could not acquire "+XTechneDesktop.className+" instance");if(null==e)throw new i("Could not acquire display surface");this.xdesktop=t,this.displaySurface=e,this.container=document.createElement("nav"),null==n?this.container.classList.add("xtechneDesktopPanel"):this.container.classList.add(n.type),this.displaySurface.appendChild(this.container)}return t.className="XTechnePanel",t.xdesktop=null,t.displaySurface=null,t.container=null,t.elements=null,t.prototype.initContent=function(t){var e,n,i,r,o,a;for(this.elements=new Array,e=this,a=[],r=0,o=t.length;o>r;r++)i=t[r],n=new s(this,i),null!=n&&(this.container.appendChild(n.wrapper),n.initTooltip(),a.push(this.elements.push(n)));return a},t.prototype.getElementFromTarget=function(t){var e,n,i,r;for(r=this.elements,e=0,n=r.length;n>e;e++)if(i=r[e],i.domTarget===t)return i},t.prototype.getElementFromWindow=function(t){var e,n,i,r;for(r=this.elements,e=0,n=r.length;n>e;e++)if(i=r[e],null!=i.menu&&i.menu.window===t)return i},t.prototype.actionToString=function(t){return null==t?"":(t=t.split("exec ")[1],null==t?"":t=t.slice(0,1).toUpperCase()+t.slice(1).toLowerCase())},t.prototype.handleClick=function(t){var n,i,r,s;return r=this.getElementFromTarget(t.srcElement),null==r&&console.warn("Unknown panel item "+t.srcElement),"startMenuToggle"===r.action&&null!=r.menu?r.menu.toggle():r.action.match(/^exec .+$/)?r.isOpen?(s=this.xdesktop.stackManager.findByTarget(r),null!=s?s.isHidden()?s.show():s.minimize():r.setOpen(!1)):(i=r.action.split("exec ")[1],i=i.slice(0,1).toUpperCase()+i.slice(1).toLowerCase(),n=e("src/Apps/"+i+"/"+i),this.xdesktop.stackManager.register(r,new n(this.displaySurface)),r.setOpen(!0)):void 0},t}()}),require.register("src/Xjs/XTechnePanelItem",function(t,e,n){var i,r,s;s=e("src/Xjs/XTechneWindow"),i=e("src/JSUtils/Position"),n.exports=r=function(){function t(t,e){var n;return null==t?void console.warn("Cannot acquire panel instance"):null==e.type?void console.warn("Missing panelItem type for "+JSON.stringify(e)):(n=this,this.panel=t,this.type=e.type,this.wrapper=document.createElement("div"),this.wrapper.classList.add("xtechneDesktopPanelItemWrapper"),this.domTarget=document.createElement("div"),this.domTarget.classList.add(this.type),this.wrapper.appendChild(this.domTarget),"xtechneDesktopPanelSeparator"!==this.type&&(this.domTarget.style.backgroundImage="url('"+e.iconSrc+"')",this.domTarget.onclick=function(t){return n.panel.handleClick(t)},Waves.attach(this.domTarget,["waves-light"])),null!=e.onClickAction&&(this.action=e.onClickAction),void(null!=this.action&&"startMenuToggle"===this.action&&this.createStartMenu()))}return t.className="XTechnePanelItem",t.type="",t.panel=null,t.wrapper=null,t.domTarget=null,t.tooltip=null,t.action=null,t.menu=null,t.isOpen=!1,t.prototype.initTooltip=function(){var t,e;return t=this,e=this.panel.actionToString(this.action),""!==e?(this.tooltip=document.createElement("span"),this.tooltip.classList.add("tooltip"),this.tooltip.innerHTML=e,this.wrapper.appendChild(this.tooltip)):void 0},t.prototype.createStartMenu=function(){var t;return this.domTarget.id="startMenuToggler",this.menu=new s(this.panel.displaySurface,"Start",{position:{left:"0",right:null,top:null,bottom:"50px"},size:{w:"400px",h:"600px"},borders:!1,background:"#282828",stack:9999}),t=this,this.menu.window.addEventListener("blur",function(e){var n;return n=t.panel.getElementFromWindow(e.srcElement),n.menu.hide()})},t.prototype.setOpen=function(t){return this.isOpen=t,t?this.domTarget.classList.add("open"):this.domTarget.classList.remove("open")},t}()}),require.register("src/Xjs/XTechneStackingManager",function(t,e,n){var i;n.exports=i=function(){function t(){this.stack=new Array}return t.className="XTechneStackingManager",t.stack=null,t.prototype.register=function(t,e){return null==e?void console.warn("Cannot acquire window frame"):null==e?void console.warn("Cannot acquire window frame"):(this.stack.push({target:t,frame:e}),this.updateStack())},t.prototype.unregister=function(t){var e,n,i,r,s;for(null==t&&console.warn("Cannot acquire window frame"),e=-1,r=this.stack,n=0,i=r.length;i>n;n++){if(s=r[n],s.frame===t){e++;break}e++}return-1!==e?this.stack.splice(e,1):void 0},t.prototype.updateStack=function(){var t,e,n,i,r,s,o;for(t=0,o=1,i=this.stack,r=[],e=0,n=i.length;n>e;e++)s=i[e],document.contains(s.frame.window)||(s.target.setOpen(!1),this.stack.splice(t,1),this.updateStack()),s.frame.style.zIndex=o,t++,r.push(o+=100);return r},t.prototype.findByTarget=function(t){var e,n,i,r,s;for(e=0,r=this.stack,n=0,i=r.length;i>n;n++){if(s=r[n],s.target===t&&document.contains(s.frame.window))return s.frame;e++}},t.prototype.findByFrame=function(t){var e,n,i,r,s;for(e=0,r=this.stack,n=0,i=r.length;i>n;n++)s=r[n],s.frame===t&&s.target,e++},t}()}),require.register("src/Xjs/XTechneStartup",function(t,e,n){var i,r,s;i=e("src/Exceptions/XException"),r=e("src/Xjs/XTechne"),n.exports=s=function(){function t(e,n){if(null==e)throw new i("Could not acquire "+r.className+" instance");if(null==n)throw new i("Could not acquire display surface");this.xtechne=e,this.displaySurface=n,EventDispatcher.prototype.apply(t.prototype),this.addEventListener("startup",function(t){return e.startLogin()}),this.displaySplash()}return t.className="XTechneStartup",t.xtechne=null,t.displaySurface=null,t.panel=null,t.osName=null,t.prototype.displaySplash=function(){var t,n,i;return t=e("OS"),this.panel=document.createElement("div"),this.panel.classList.add("xtechneStartupContainer"),i='<span id="XTechneStartupOsName" class="noselect">Omphal<span>OS</span> <span id="XTechneStartupOsDetails" class="noselect">v'+t.version+" "+t.versionName+"</span> </span>",this.panel.insertAdjacentHTML("beforeend",i),this.osName=document.getElementById("XTechneStartupOsName"),this.displaySurface.appendChild(this.panel),n=this,setTimeout(function(){return n.xtechne.clearSurface(n.displaySurface),n.dispatchEvent({type:"startup",message:"Startup splash finished"})},6e3)},t}()}),require.register("src/Xjs/XTechneWindow",function(t,e,n){var i;n.exports=i=function(){function t(t,e,n){return null==t?void console.warn("No surface"):null==e?void console.warn("No name"):null==n?void console.warn("No style"):(this.displaySurface=t,this.name=e,this.window=document.createElement("div"),this.window.classList.add("xtechneWindow"),this.window.tabIndex=0,this.style=n,this.style.borders===!1&&this.window.classList.add("borderless"),this.hide(),void this.init(!(this.style.borders===!1)))}return t.className="XTechneWindow",t.displaySurface=null,t.name="",t.window=null,t.bar=null,t.minimizeButton=null,t.maximizeButton=null,t.closeButton=null,t.style=null,t.draggie=null,t.isMaximized=!1,t.prototype.init=function(t){return this.setSize(),this.setPosition(),this.setBackground(),this.setStack(),this.displaySurface.appendChild(this.window),t?this.initBorders():void 0},t.prototype.setSize=function(t){return null!=t?(this.window.style.width=t.w,this.window.style.height=t.h):null!=this.style.size&&null!=this.style.size.w&&null!=this.style.size.h?(this.window.style.width=this.style.size.w,this.window.style.height=this.style.size.h):void 0},t.prototype.setPosition=function(t){var e,n;if(null!=t){if(null!=t.left&&(this.window.style.left=t.left),null!=t.right&&(this.window.style.right=t.right),null!=t.top&&(this.window.style.top=t.top),null!=t.bottom)return this.window.style.bottom=t.bottom}else{if(null==this.style.position)return e=window.innerWidth/2-parseInt(this.window.style.width)/2,n=window.innerHeight/2-parseInt(this.window.style.height)/2,this.window.style.left=e+"px",this.window.style.top=n+"px";if(null!=this.style.position.left&&(this.window.style.left=this.style.position.left),null!=this.style.position.right&&(this.window.style.right=this.style.position.right),null!=this.style.position.top&&(this.window.style.top=this.style.position.top),null!=this.style.position.bottom)return this.window.style.bottom=this.style.position.bottom}},t.prototype.setBackground=function(){return null!=this.style.background?this.window.style.background=this.style.background:void 0},t.prototype.setStack=function(){return null!=this.style.stack?this.window.style.zIndex=this.style.stack:void 0},t.prototype.initBorders=function(){var t,e;return this.bar=document.createElement("div"),this.bar.classList.add("bar"),this.bar.classList.add("noselect"),e="<span class='windowBorderName'>"+this.name+"</span> <nav class='windowBorderControls'> <span class='windowBorderControl minimize'></span> <span class='windowBorderControl maximize'></span> <span class='windowBorderControl close'></span> </nav>",this.bar.insertAdjacentHTML("beforeend",e),this.window.appendChild(this.bar),this.draggie=new Draggabilly(this.window,{handle:".bar"}),this.minimizeButton=this.bar.getElementsByClassName("minimize")[0],t=this,this.minimizeButton.onclick=function(){return t.minimize()},this.maximizeButton=this.bar.getElementsByClassName("maximize")[0],this.maximizeButton.onclick=function(){return t.maximize()},this.closeButton=this.bar.getElementsByClassName("close")[0],this.closeButton.onclick=function(){return t.close()}},t.prototype.show=function(){var t;if(this.isHidden())return this.window.classList.remove("hidden"),this.window.classList.add("moving"),this.setSize(),this.setPosition(),t=this,setTimeout(function(){return t.window.classList.remove("moving"),t.window.focus()},400)},t.prototype.hide=function(){return this.window.classList.add("hidden"),this.window.blur()},t.prototype.toggle=function(){return this.isHidden?this.show():this.hide()},t.prototype.isHidden=function(){return this.window.classList.contains("hidden")},t.prototype.minimize=function(){var t,e,n;return this.window.classList.add("moving"),e="0%",n=xDesktop.stackManager.findByFrame(this.window),null!=n&&(e=n.domTarget.offsetLeft+n.domTarget.offsetWidth/2+"px"),this.setSize({w:"0px",h:"0px"}),this.setPosition({top:"100%",left:e}),this.hide(),t=this,setTimeout(function(){return t.window.classList.remove("moving")},400)},t.prototype.maximize=function(){var t;return this.window.classList.add("moving"),this.isMaximized?(this.setSize(),this.setPosition(),this.isMaximized=!1):(this.setSize({w:window.innerWidth+"px",h:window.innerHeight-40+"px"}),this.setPosition({top:0,left:0}),this.isMaximized=!0),t=this,setTimeout(function(){return t.window.classList.remove("moving")},400)},t.prototype.close=function(){var t;return t=this,this.minimizeButton.onclick=null,this.maximizeButton.onclick=null,this.closeButton.onclick=null,this.hide(),setTimeout(function(){return t.draggie.destroy(),t.draggie=null,t.displaySurface.removeChild(t.window),window.xDesktop.stackManager.updateStack()},400),null},t}()});