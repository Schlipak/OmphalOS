{"version":3,"sources":["app/Kernel.coffee","app/OS.coffee","app/src/Exceptions/GenericException.coffee","app/src/Exceptions/IOException.coffee","app/src/Exceptions/KernelException.coffee","app/src/Exceptions/KernelPanic.coffee","app/src/Exceptions/OSException.coffee","app/src/Exceptions/XException.coffee","app/src/HTMLUtils/NodeTester.coffee","app/src/IO/KeyboardListener.coffee","app/src/IO/TTYManager.coffee","app/src/JSUtils/AjaxHelper.coffee","app/src/Xjs/XTechne.coffee","app/src/Xjs/XTechneDesktop.coffee","app/src/Xjs/XTechneLogin.coffee","app/src/Xjs/XTechnePanel.coffee","app/src/Xjs/XTechneStartup.coffee"],"names":[],"mappings":"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","file":"public/js/app.js","sourcesContent":["KernelPanic         = require 'src/Exceptions/KernelPanic'\nNodeTester          = require 'src/HTMLUtils/NodeTester'\nKeyboardListener    = require 'src/IO/KeyboardListener'\nTTYManager          = require 'src/IO/TTYManager'\n\nmodule.exports = class Kernel\n    @className          = 'Kernel'\n    @version            = '0.1'\n\n    @displaySurface     = null\n    @keyboardListener   = null\n    @TTYManager         = null\n\n    constructor: (container) ->\n        if not container?\n            throw new KernelPanic @, 'Could not acquire display, aborting'\n        @displaySurface = container\n        @createTTYs()\n        return @\n\n    createTTYs: () -> @TTYManager = new TTYManager @, @displaySurface, 7\n\n    getTTY: (id) -> @TTYManager.getTTY id\n\n    hideTTYs: () -> @TTYManager.hideTTYs()\n\n    showTTY: (id) -> @TTYManager.showTTY id\n\n    clearTTY: (id) -> @TTYManager.clearTTY id\n\n    emitException: (msg, halt = false) ->\n        tty = @TTYManager.getTTY 1\n        if not tty?\n            throw new IOException 'Could not acquire TTY'\n        time = new Date().toLocaleTimeString()\n        @write tty, \"[#{time}] %(F:yellow)Kernel exception%(F): #{msg}\"\n        if halt is true\n            throw new Error msg\n\n    emitMessage: (msg, id = 1) ->\n        tty = @TTYManager.getTTY id\n        if not tty?\n            throw new IOException 'Could not acquire TTY'\n        time = new Date().toLocaleTimeString()\n        @write tty, \"[#{time}] Message: #{msg}\"\n\n    boot: () ->\n        @write(@getTTY(1), \"Kernel version #{Kernel.version}\")\n        @write(@getTTY(1), '%(F:green)Welcome!%(F)')\n        @write(@getTTY(1), 'Starting keyboard listener...')\n        @keyboardListener = new KeyboardListener @\n        @keyboardListener.registerTTYCombos()\n        @write(@getTTY(1), 'Loading single-user configuration...')\n\n    write: (target, string) ->\n        if not target?\n            @emitException 'Could not find write target'\n            return false\n        if NodeTester.isDOM target\n            string = string.replace(/%\\(([FB]){1}\\:([\\w\\d]+)*\\)/g, \"<span class=\\\"$1 $2\\\" data-color=\\\"$2\\\">\")\n            string = string.replace(/%\\([FB]{1}\\)/g, '</span>')\n            target.insertAdjacentHTML 'beforeend', '<span>'+string+'</span>'\n            return true\n        false\n","Kernel              = require 'Kernel'\nXTechne             = require 'src/Xjs/XTechne'\nOSException         = require 'src/Exceptions/OSException'\n\nmodule.exports  = class OS\n    @className      : 'OmphalOS'\n    @version        : '0.1'\n    @versionName    : 'Artemis'\n\n    @kernel         = null\n    @displayManager = null\n\n    constructor: (container) ->\n        @kernel = new Kernel(container)\n        return @\n\n    boot: () ->\n        if not @kernel?\n            throw new OSException 'Could not start kernel. This is bad.'\n        @kernel.showTTY 1\n        @kernel.write(@kernel.getTTY(1), \"#{OS.className} version #{OS.version} \\\"#{OS.versionName}\\\"\")\n        @kernel.boot()\n        @kernel.write(@kernel.getTTY(1), \"Starting #{XTechne.className} on TTY7...\")\n        @displayManager = new XTechne @kernel, @kernel.getTTY 7\n        if not @displayManager?\n            throw new OSException @, \"Could not connect to #{XTechne.className}\"\n        @displayManager.init()\n","module.exports = class GenericException\n    @className = 'GenericException'\n\n    constructor: (kernel, msg) ->\n        if not kernel?\n            throw new Error msg\n        tty = kernel.getTTY 1\n        time = new Date().toLocaleString()\n        kernel.write tty, \"[ #{time} ] Generic exception: #{msg}\"\n\nGenericException.prototype = Object.create Error.prototype\nGenericException.prototype.name = 'GenericException'\n","module.exports = class IOException\n    @className = 'IOException'\n\n    constructor: (msg) ->\n        time = new Date().toLocaleTimeString()\n        document.getElementsByTagName('body')[0].innerHTML = \"[ #{time} ] IO exception: #{msg}\"\n        throw new Error msg\n\nIOException.prototype = Object.create Error.prototype\nIOException.prototype.name = 'IOException'\n","GenericException = require 'src/Exceptions/GenericException'\n\nmodule.exports = class KernelException extends GenericException\n    @className = 'KernelException'\n\n    constructor: (kernel, msg) ->\n        super msg\n        tty = kernel.getTTY 1\n        time = new Date().toLocaleString()\n        kernel.write tty, \"[ #{time} ] Kernel exception: #{msg}\"\n\nKernelException.prototype = Object.create Error.prototype\nKernelException.prototype.name = 'KernelException'\n","module.exports = class KernelPanic\n    @className = 'KernelPanic'\n\n    constructor: (kernel, msg) ->\n        if not kernel?\n            throw new Error msg\n        if not kernel.TTYs? or kernel.TTYs.length is 0\n            throw new Error msg\n        tty = kernel.TTYs[0]\n        time = new Date().toLocaleTimeString()\n        for i in [2..7]\n            kernel.clearTTY i\n        kernel.showTTY 1\n        kernel.write tty, \"[ #{time} ] %(F:red)Kernel panic%(F): #{msg}\"\n\nKernelPanic.prototype = Object.create Error.prototype\nKernelPanic.prototype.name = 'KernelPanic'\n","module.exports = class OSException\n    @className = 'OSException'\n\n    constructor: (msg) ->\n        time = new Date().toLocaleTimeString()\n        document.getElementsByTagName('body')[0].innerHTML = \"[ #{time} ] System exception: #{msg}\"\n        throw new Error msg\n\nOSException.prototype = Object.create Error.prototype\nOSException.prototype.name = 'OSException'\n","GenericException = require 'src/Exceptions/GenericException'\n\nmodule.exports = class XException extends GenericException\n    @className = 'XException'\n\n    constructor: (msg) ->\n        super msg\n        body = document.getElementsByTagName('body')[0]\n        body.innerHTML = msg\n\nXException.prototype = Object.create Error.prototype\nXException.prototype.name = 'XException'\n","module.exports = class NodeTester\n    @className = 'NodeTester'\n\n    constructor: () ->\n\n    @isNode: (o) ->\n        return false if not o?\n        if typeof o is typeof {}\n            return o instanceof Node\n        return typeof o is typeof {} and typeof o.nodeType is typeof 0 and typeof o.nodeName is typeof ''\n\n    @isDOM: (o) ->\n        return false if not o?\n        if HTMLElement is typeof {}\n            return o instanceof HTMLElement\n        return typeof o is typeof {} and o isnt null and o.nodeType is 1 and typeof o.nodeName is typeof ''\n","IOException     = require 'src/Exceptions/IOException'\n\nmodule.exports  = class KeyboardListener\n    @className  = 'KeyboardListener'\n    @version    = '0.1'\n\n    @kernel     = null\n    @listener   = null\n\n    constructor: (kernel) ->\n        if not kernel?\n            throw new IOException 'Somehow, could not acquire kernel. This is bad.'\n        @kernel = kernel\n        if not window.keypress.Listener?\n            @kernel.emitException 'Cannot initialize keyboard listener', true\n        @listener = new window.keypress.Listener()\n        @kernel.write(@kernel.getTTY(1), \"#{KeyboardListener.className} version #{KeyboardListener.version}\")\n        return @\n\n    register: (combo, callback, unordered, solitary) ->\n        if not combo? or not callback?\n            @kernel.emitException 'Cannot register new key listener: Invalid combo or callback'\n            return false\n        if not unordered? then unordered = true\n        if not solitary? then solitary = true\n        @listener.register_combo({\n            'keys': combo,\n            'on_keydown': callback,\n            'is_unordered': unordered,\n            'is_solitary': solitary\n        })\n        true\n\n    unregister: (combo) ->\n        if not combo?\n            @kernel.emitException 'Cannot unregister unknown key combo'\n            return false\n        @listener.unregister_combo(combo)\n        true\n\n    registerTTYCombos: () ->\n        if not @kernel?\n            throw new IOException 'Somehow, could not acquire kernel. This is bad.'\n        _kernel = @kernel\n        for i in [1..7]\n            @register(\"meta alt #{i}\", (e) ->\n                _kernel.showTTY e.which - 48\n            )\n","IOException         = require 'src/Exceptions/IOException'\nNodeTester          = require 'src/HTMLUtils/NodeTester'\n\nmodule.exports      = class TTYManager\n    @className      = 'TTYManager'\n\n    @kernel         = null\n    @displaySurface = null\n\n    @TTYs           = null\n    @activeTTY      = 1\n\n    constructor: (kernel, surface, nb) ->\n        if not kernel?\n            throw new IOException 'Somehow, could not acquire kernel. This is bad.'\n        @kernel = kernel\n        if not surface?\n            throw new IOException 'Could acquire display surface'\n        @displaySurface = surface\n        @TTYs = new Array\n        for i in [1..nb]\n            tty = document.createElement 'div'\n            tty.classList.add 'tty'\n            tty.setAttribute 'data-id', i\n            surface.appendChild tty\n            @TTYs.push tty\n            @kernel.write tty, \"[TTY#{i}]\"\n\n    getTTY: (id) ->\n        if not id? or id < 1 or id > 7\n            @kernel.emitException \"TTY#{id} does not exist\"\n            return undefined\n        return @TTYs[id - 1]\n\n    hideTTYs: () ->\n        for tty in @TTYs\n            tty.classList.remove 'active'\n        true\n\n    showTTY: (id) ->\n        if not id?\n            @kernel.emitException 'Invalid TTY id'\n            return false\n        if typeof id is typeof 0\n            if id is @activeTTY\n                return false\n            if id < 1 or id > 7\n                @kernel.emitException \"TTY#{id} does not exist\"\n                return false\n            @hideTTYs()\n            @TTYs[id - 1].classList.add 'active'\n            @activeTTY = id\n        else if NodeTester.isDOM id\n            @hideTTYs()\n            id.classList.add 'active'\n            @activeTTY = id.getAttribute 'data-id'\n        else\n            return false\n        true\n\n    clearTTY: (id) ->\n        tty = @getTTY id\n        while tty.lastChild\n            tty.removeChild tty.lastChild\n        true\n","module.exports = class AjaxHelper\n    @className = 'AjaxHelper'\n\n    @getJSON = (url, callback) ->\n        if not url?\n            console.warn 'no url'\n            return null\n        if not callback?\n            console.warn 'no callback'\n            return null\n        if not url.match /^.+(.json)$/\n            url = url + '.json'\n        request = new XMLHttpRequest()\n        request.open 'GET', url, true\n        request.onload = () ->\n            if request.status >= 200 and request.status < 400\n                data = JSON.parse request.responseText\n                callback data\n            else\n                console.warn 'error getting data'\n        request.onerror = (e) ->\n            warn e\n        request.send()\n","XException      = require 'src/Exceptions/XException'\nXTechneStartup  = require 'src/Xjs/XTechneStartup'\nXTechneLogin    = require 'src/Xjs/XTechneLogin'\nXTechneDesktop  = require 'src/Xjs/XTechneDesktop'\n\nmodule.exports = class XTechne\n    @className = 'XTechne display manager'\n\n    @kernelInstance = null\n    @displaySurface = null\n\n    @displayContainer   = null\n    @startupManager     = null\n    @loginManager       = null\n    @desktopManager     = null\n\n    constructor: (kernel, surface) ->\n        if not kernel?\n            throw new XException 'Somehow, could not acquire kernel. This is bad.'\n        if not surface?\n            throw new XException 'Could not acquire display surface. Aborting'\n        @kernelInstance = kernel\n        @displaySurface = surface\n\n    init: () ->\n        @kernelInstance.showTTY @displaySurface\n        @kernelInstance.write(@displaySurface, 'Loading display...')\n        @displaySurface.classList.add 'xinstance'\n        @displayContainer = document.createElement 'div'\n        @displayContainer.classList.add 'xtechneContainer'\n        Waves.init()\n        @clearScreen()\n        @displaySurface.appendChild @displayContainer\n        @startupManager = new XTechneStartup @, @displayContainer\n\n    startLogin: () ->\n        @loginManager = new XTechneLogin @, @displayContainer\n\n    startDesktop: () ->\n        _xtechne = @\n        @loginManager.removeEventListener('loginSuccess')\n        @loginManager.removeEventListener('loginError')\n        setTimeout(\n            () ->\n                _xtechne.clearSurface _xtechne.loginManager.displaySurface\n                delete _xtechne.loginManager\n                _xtechne.loginManager = null\n                _xtechne.desktopManager = new XTechneDesktop(_xtechne, _xtechne.displayContainer)\n            , 600\n        )\n\n    clearSurface: (surface) ->\n        if not surface?\n            @kernel.emitException 'Could not find XTechne surface'\n            return false\n        while surface.lastChild\n            surface.removeChild surface.lastChild\n        undefined\n\n    clearScreen: () ->\n        while @displaySurface.lastChild\n            @displaySurface.removeChild @displaySurface.lastChild\n        undefined\n","XException      = require 'src/Exceptions/XException'\nXTechnePanel    = require 'src/Xjs/XTechnePanel'\nAjaxHelper      = require 'src/JSUtils/AjaxHelper'\n\nmodule.exports = class XTechneDesktop\n    @className = 'XTechneDesktop'\n\n    @xtechne            = null\n    @displayContainer   = null\n    @displaySurface     = null\n\n    @panels             = null\n\n    constructor: (xtechne, surface) ->\n        if not xtechne?\n            throw new XException \"Could not acquire #{XTechne.className} instance\"\n        if not surface?\n            throw new XException 'Could not acquire display surface'\n        @xtechne = xtechne\n        @displayContainer = surface\n        @displaySurface = document.createElement 'div'\n        @displaySurface.classList.add 'xtechneDesktopContainer'\n        @displaySurface.classList.add 'hidden'\n        @displayContainer.appendChild @displaySurface\n        @initDesktop()\n\n    initDesktop: () ->\n        _this = @\n        AjaxHelper.getJSON 'etc/xtechne/desktoprc', (data) ->\n            _this.panels = new Array\n            for pData in data.panels\n                panel = new XTechnePanel _this, _this.displaySurface, pData\n                panel.initContent pData.contents\n                _this.panels.push panel\n            if data.theme? and data.theme.backgroundImage?\n                _this.displaySurface.style.backgroundImage = \"url('#{data.theme.backgroundImage}')\"\n            _this.displaySurface.classList.remove 'hidden'\n","XException  = require 'src/Exceptions/XException'\nAjaxHelper  = require 'src/JSUtils/AjaxHelper'\n\nmodule.exports = class XTechneLogin\n    @className      = 'XTechne login manager'\n\n    @xtechne        = null\n    @displaySurface = null\n    @panel          = null\n    @box            = null\n\n    @loginForm      = null\n    @usernameInput  = null\n    @passwordInput  = null\n    @submitButton   = null\n\n    _logged         = false\n\n    constructor: (xtechne, surface) ->\n        if not xtechne?\n            throw new XException \"Could not acquire #{XTechne.className} instance\"\n        if not surface?\n            throw new XException 'Could not acquire display surface'\n        @xtechne = xtechne\n        @displaySurface = surface\n        EventDispatcher.prototype.apply XTechneLogin.prototype\n        _this = @\n        @addEventListener('loginSuccess', (e) -> xtechne.startDesktop())\n        @addEventListener('loginError', (e) -> _this.displayError(e))\n        @createPanel()\n        Waves.attach @submitButton, ['waves-button', 'waves-float', 'waves-light']\n\n    createPanel: () ->\n        @panel = document.createElement 'div'\n        @panel.classList.add 'xtechneLoginContainer'\n        @displaySurface.appendChild @panel\n        @box = document.createElement 'div'\n        @box.classList.add 'xtechneLoginBox'\n        @panel.appendChild @box\n        content = '\n            <form action=\"\" id=\"loginFormContainer\">\n                <label for=\"userInputBox\" class=\"noselect\">\n                    Username\n                    <input type=\"text\" name=\"username\" id=\"userInputBox\" autocomplete=\"off\" autofocus>\n                </label>\n                <label for=\"passwordInputBox\" class=\"noselect\">\n                    Password\n                    <input type=\"password\" name=\"password\" id=\"passwordInputBox\" autocomplete=\"off\">\n                </label>\n                <button type=\"submit\" name=\"loginButton\" id=\"loginButton\" class=\"material button blue\">Login</button>\n            </form>\n        '\n        @box.insertAdjacentHTML 'beforeend', content\n        @loginForm     = document.getElementById 'loginFormContainer'\n        @usernameInput = document.getElementById 'userInputBox'\n        @passwordInput = document.getElementById 'passwordInputBox'\n        @submitButton  = document.getElementById 'loginButton'\n        _this = @\n        @loginForm.onsubmit = (e) ->\n            e.preventDefault()\n            _this.login()\n\n    __get_user_hash__: (user, callback) ->\n        if not user?\n            return false\n        if not callback?\n            return false\n        AjaxHelper.getJSON 'etc/passwd', callback\n\n    displayError: (e) ->\n        console.warn e.message\n        @submitButton.disabled = true\n        @submitButton.classList.add 'error'\n        _this = @\n        setTimeout(\n            () ->\n                _this.submitButton.disabled = false\n                _this.submitButton.classList.remove 'error'\n            , 1200\n        )\n\n\n    login: () ->\n        if _logged is true\n            return false\n        username = @usernameInput.value.toLowerCase()\n        @usernameInput.value = username\n        hash = String(CryptoJS.SHA3(@passwordInput.value))\n        _this = @\n        if username.length > 0 and _this.passwordInput.value.length > 0\n            @__get_user_hash__ username, (data) ->\n                matchHash = null\n                for userEntry in data\n                    if userEntry.user is username\n                        matchHash = userEntry.hash\n                if not matchHash? or matchHash isnt hash\n                    _this.dispatchEvent({\n                        type: 'loginError',\n                        message: \"Bad credentials for user #{username}\"\n                    })\n                    return false\n                _logged = true\n                _this.submitButton.disabled = true\n                _this.dispatchEvent({\n                    type: 'loginSuccess',\n                    message: \"User #{username} logged in successfully\"\n                })\n                _this.panel.classList.add 'dismissing'\n                return true\n        else\n            @dispatchEvent({\n                type: 'loginError',\n                message: \"Username or password missing\"\n            })\n        return false\n","XException      = require 'src/Exceptions/XException'\n\nmodule.exports = class XTechnePanel\n    @className = 'XTechnePanel'\n\n    @xdesktop           = null\n    @displaySurface     = null\n\n    @container          = null\n    @elements           = null\n\n    constructor: (xdesktop, surface, data) ->\n        if not xdesktop?\n            throw new XException \"Could not acquire #{XTechneDesktop.className} instance\"\n        if not surface?\n            throw new XException 'Could not acquire display surface'\n        @xdesktop = xdesktop\n        @displaySurface = surface\n        @container = document.createElement 'nav'\n        if not data?\n            @container.classList.add 'xtechneDesktopPanel'\n        else\n            @container.classList.add data.type\n        @displaySurface.appendChild @container\n\n    initContent: (contents) ->\n        @elements = new Array\n        _this = @\n        for elData in contents\n            if not elData.type?\n                # TODO: Replace with future notification system call\n                console.warn \"Missing panelItem type for #{JSON.stringify(elData)}\"\n                continue\n            elObj = {}\n            el = document.createElement 'div'\n            el.classList.add elData.type\n            if elData.type isnt 'xtechneDesktopPanelSeparator'\n                el.style.backgroundImage = \"url('#{elData.iconSrc}')\"\n                el.onclick = (e) ->\n                    _this.handleClick e\n                Waves.attach el, ['waves-light']\n            @container.appendChild el\n            elObj.domTarget = el\n            elObj.action = elData.onClickAction if elData.onClickAction?\n            @elements.push elObj\n\n    getElementFromDOM: (domEl) ->\n        for o in @elements\n            if o.domTarget is domEl\n                return o\n\n    handleClick: (e) ->\n        o = @getElementFromDOM e.srcElement\n        if not o?\n            # TODO: Replace with future notification system call\n            console.warn \"Unknown panel item #{e.srcElement}\"\n        console.log o.action\n","XException  = require 'src/Exceptions/XException'\nXTechne     = require 'src/Xjs/XTechne'\n\nmodule.exports = class XTechneStartup\n    @className = 'XTechneStartup'\n\n    @xtechne        = null\n    @displaySurface = null\n\n    @panel          = null\n    @osName         = null\n\n    constructor: (xtechne, surface) ->\n        if not xtechne?\n            throw new XException \"Could not acquire #{XTechne.className} instance\"\n        if not surface?\n            throw new XException 'Could not acquire display surface'\n        @xtechne = xtechne\n        @displaySurface = surface\n        EventDispatcher.prototype.apply XTechneStartup.prototype\n        @addEventListener('startup', (e) -> xtechne.startLogin())\n        @displaySplash()\n\n    displaySplash: () ->\n        OS = require 'OS'\n        @panel = document.createElement 'div'\n        @panel.classList.add 'xtechneStartupContainer'\n        content = \"\n            <span id=\\\"XTechneStartupOsName\\\" class=\\\"noselect\\\">Omphal<span>OS</span>\n                <span id=\\\"XTechneStartupOsDetails\\\" class=\\\"noselect\\\">v#{OS.version} #{OS.versionName}</span>\n            </span>\n        \"\n        @panel.insertAdjacentHTML 'beforeend', content\n        @osName = document.getElementById 'XTechneStartupOsName'\n        @displaySurface.appendChild @panel\n        _this = @\n        setTimeout(\n            () ->\n                _this.xtechne.clearSurface _this.displaySurface\n                _this.dispatchEvent({\n                    type: 'startup',\n                    message: 'Startup splash finished'\n                    })\n            , 6000\n        )\n"]}